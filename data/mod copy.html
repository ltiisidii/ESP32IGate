<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script> -->
        <link rel="stylesheet" href="/bootstrap.min.css">
        <title>ESP32IGATE - Modifications</title>
    </head>
    <body class="bg-dark text-light">
        <div class="container py-3">
            <h1 class="text-center"><a href="/" class="text-decoration-none text-light">ESP32IGate Project [Modifications]</a></h1>
        </div>
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item"><a class="nav-link" href="/">Dashboard</a></li>
                        <li class="nav-item"><a class="nav-link" href="/radio">Radio</a></li>
                        <li class="nav-item"><a class="nav-link" href="/tnc2">TNC</a></li>
                        <li class="nav-item"><a class="nav-link" href="/gnss">GNSS</a></li>
                        <li class="nav-item"><a class="nav-link" href="/igate">IGATE</a></li>
                        <li class="nav-item"><a class="nav-link" href="/digi">Digi</a></li>
                        <li class="nav-item"><a class="nav-link" href="/tracker">Tracker</a></li>
                        <li class="nav-item"><a class="nav-link" href="/wx">WX</a></li>
                        <li class="nav-item"><a class="nav-link" href="/tlm">TLM</a></li>
                        <li class="nav-item"><a class="nav-link" href="/wireless">Wireless</a></li>
                        <li class="nav-item"><a class="nav-link active" href="/mod">Mod</a></li>
                        <li class="nav-item"><a class="nav-link" href="/system">System</a></li>
                        <li class="nav-item"><a class="nav-link" href="/about">About</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="container mt-4 mb-5" id="contentmain">
            <div class="row row-cols-1 row-cols-md-3 g-4">
                <div class="mb-4 border border-primary rounded p-3">
                    <h5>UART0 (USB) Modify</h5>
                    <div class="form-check form-switch mb-3"><input class="form-check-input" type="checkbox" id="uart0_enable" /><label class="form-check-label" for="uart0_enable">Enable</label></div>
                    <div class="mb-3"><label for="uart0Rx" class="form-label">RX GPIO:</label><input min="-1" max="39" name="uart0_rx_gpio" type="number" class="form-control" id="uart0Rx" value="%UART0_RX_GPIO%" /></div>
                    <div class="mb-3"><label for="uart0Tx" class="form-label">TX GPIO:</label><input min="-1" max="39" name="uart0_tx_gpio" type="number" class="form-control" id="uart0Tx" value="%UART0_TX_GPIO%" /></div>
                    <div class="mb-3"><label for="uart0Rts" class="form-label">RTS/DE GPIO:</label><input min="-1" max="39" name="uart0_rts_gpio" type="number" class="form-control" id="uart0Rts" value="%UART0_RTS_GPIO%" /></div>
                    <div class="mb-3">
                        <label for="uart0Baudrate" class="form-label">Baudrate:</label>
                        <select name="baudrate" id="uart0_baudrate" class="form-select">
                            %UART0_BAUDRATE%
                        </select>
                        <small class="small text-light">bps</small>
                    </div>
                    <button type="button" class="btn btn-primary">Apply</button>
                </div>
                <div class="mb-4 border border-primary rounded p-3">
                    <h5>UART1 (USB) Modify</h5>
                    <div class="form-check form-switch mb-3"><input class="form-check-input" type="checkbox" id="uart1_enable" /><label class="form-check-label" for="uart1_enable">Enable</label></div>
                    <div class="mb-3"><label for="uart1Rx" class="form-label">RX GPIO:</label><input min="-1" max="39" name="uart1_rx_gpio" type="number" class="form-control" id="uart1Rx" value="%UART1_RX_GPIO%" /></div>
                    <div class="mb-3"><label for="uart1Tx" class="form-label">TX GPIO:</label><input min="-1" max="39" name="uart1_tx_gpio" type="number" class="form-control" id="uart1Tx" value="%UART1_TX_GPIO%" /></div>
                    <div class="mb-3"><label for="uart1Rts" class="form-label">RTS/DE GPIO:</label><input min="-1" max="39" name="uart1_rts_gpio" type="number" class="form-control" id="uart1Rts" value="%UART1_RTS_GPIO%" /></div>
                    <div class="mb-3">
                        <label for="uart1_baudrate" class="form-label">Baudrate:</label>
                        <select name="baudrate" id="uart1_baudrate" class="form-select">
                            %UART1_BAUDRATE%
                        </select>
                        <small class="small text-light">bps</small>
                    </div>
                    <button type="button" class="btn btn-primary">Apply</button>
                </div>
                <div class="mb-4 border border-primary rounded p-3">
                    <h5>UART2 (USB) Modify</h5>
                    <div class="form-check form-switch mb-3"><input class="form-check-input" type="checkbox" id="uart2_enable" /><label class="form-check-label" for="uart2_enable">Enable</label></div>
                    <div class="mb-3"><label for="uart2_rx_gpio" class="form-label">RX GPIO:</label><input min="-1" max="39" name="uart2_rx_gpio" type="number" class="form-control" id="uart2_rx_gpio" value="%UART2_RX_GPIO%" /></div>
                    <div class="mb-3"><label for="uart2_tx_gpio" class="form-label">TX GPIO:</label><input min="-1" max="39" name="uart2_tx_gpio" type="number" class="form-control" id="uart2_tx_gpio" value="%UART2_TX_GPIO%" /></div>
                    <div class="mb-3"><label for="uart2_rts_gpio" class="form-label">RTS/DE GPIO:</label><input min="-1" max="39" name="uart2_rts_gpio" type="number" class="form-control" id="uart2_rts_gpio" value="%UART2_RTS_GPIO%" /></div>
                    <div class="mb-3">
                        <label for="uart2_baudrate" class="form-label">Baudrate:</label>
                        <select name="uart2_baudrate" id="uart2_baudrate" class="form-select">
                            %UART2_BAUDRATE%
                        </select>
                        <small class="small text-light">bps</small>
                    </div>
                    <button type="button" class="btn btn-primary">Apply</button>
                </div>
                <div class="mb-4 border border-primary rounded p-3">
                    <h5>RF GPIO Modify</h5>
                    <div class="mb-3">
                        <label for="rf_baudrate" class="form-label">Baudrate:</label>
                        <select name="rf_baudrate" id="rf_baudrate" class="form-select">
                            %RF_BAUDRATE%
                        </select>
                        <small class="small text-light">bps</small>
                    </div>
                    <div class="mb-3">
                        <label for="rf_adc_atten" class="form-label">ADC Attenuation:</label>
                        <select name="rf_adc_atten" id="rf_adc_atten" class="form-select">
                            <option value="0" selected="selected">0dB (100-950mV)</option>
                            <option value="1">2.5dB (100-1250mV)</option>
                            <option value="2">6dB (150-1750mV)</option>
                            <option value="3">11dB (150-2450mV)</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="rf_adc_dc_offset" class="form-label">ADC DC OFFSET:</label><input min="100" max="2500" name="rf_adc_dc_offset" type="number" value="%RF_DC_OFFSET%" />
                        <small class="small text-light">(Actual: %RF_DC_OFFSET% mV)</small>
                    </div>
                    <div class="mb-3"><label for="rf_rx_gpio" class="form-label">RX GPIO:</label><input min="-1" max="39" name="rf_rx_gpio" type="number" /></div>
                    <div class="mb-3"><label for="rf_tx_gpio" class="form-label">TX GPIO:</label><input min="-1" max="39" name="rf_tx_gpio" type="number" /></div>
                    <div class="mb-3">
                        <label for="rf_pd_gpio" class="form-label">PD GPIO:</label>
                        <td style="text-align: left;">
                            <input min="-1" max="39" name="rf_pd_gpio" type="number" value="%RF_PD_GPIO%" /> Active: <input type="radio" name="rf_pd_active" value="0" %rf_pd_active_low% />LOW
                            <input type="radio" name="rf_pd_active" value="1" %rf_pd_active_high% />HIGH
                        </td>
                    </div>
                    <div class="mb-3">
                        <label for="rf_pwr_gpio" class="form-label">H/L GPIO:</label>
                        <td style="text-align: left;">
                            <input min="-1" max="39" name="rf_pwr_gpio" type="number" value="%RF_PWR_GPIO%" /> Active: <input type="radio" name="rf_pwr_active" value="0" %rf_pwr_active_low% />LOW
                            <input type="radio" name="rf_pwr_active" value="1" %rf_pwr_active_high% />HIGH
                        </td>
                    </div>
                    <div class="mb-3">
                        <label for="rf_sql_gpio" class="form-label">SQL GPIO:</label>
                        <td style="text-align: left;">
                            <input min="-1" max="39" name="rf_sql_gpio" type="number" value="%RF_SQL_GPIO%" /> Active: <input type="radio" name="rf_sql_active" value="0" %rf_sql_active_low% />LOW
                            <input type="radio" name="rf_sql_active" value="1" %rf_sql_active_high% />HIGH
                        </td>
                    </div>
                    <div class="mb-3">
                        <label for="rf_ptt_gpio" class="form-label">PTT GPIO:</label>
                        <td style="text-align: left;">
                            <input min="-1" max="39" name="rf_ptt_gpio" type="number" value="%RF_PTT_GPIO%" /> Active: <input type="radio" name="rf_ptt_active" value="0" %rf_ptt_active_low% />LOW
                            <input type="radio" name="rf_ptt_active" value="1" %rf_ptt_active_high% />HIGH
                        </td>
                    </div>
                    <button type="button" class="btn btn-primary">Apply</button>
                </div>
                <div class="mb-4 border border-primary rounded p-3">
                    <h5>I2C_0 (OLED) Modify</h5>
                    <div class="form-check form-switch mb-3"><input class="form-check-input" type="checkbox" id="i2c0_enable" /><label class="form-check-label" for="i2c0_enable">Enable</label></div>
                    <div class="mb-3"><label for="i2c0_sda_gpio" class="form-label">SDA GPIO:</label><input min="-1" max="39" name="i2c0_sda_gpio" type="number" /></div>
                    <div class="mb-3"><label for="i2c0_sck_gpio" class="form-label">SCK GPIO:</label><input min="-1" max="39" name="i2c0_sck_gpio" type="number" /></div>
                    <div class="mb-3"><label for="i2c0_freq" class="form-label">Frequency:</label><input min="1000" max="800000" name="i2c0_freq" type="number" value="400000" /><small class="small text-light">Hz</small></div>
                    <button type="button" class="btn btn-primary">Apply</button>
                </div>
                <div class="mb-4 border border-primary rounded p-3">
                    <h5>I2C_1 Modify</h5>
                    <div class="form-check form-switch mb-3"><input class="form-check-input" type="checkbox" id="i2c1_enable" /><label class="form-check-label" for="i2c1_enable">Enable</label></div>
                    <div class="mb-3"><label for="i2c1_sda_gpio" class="form-label">SDA GPIO:</label><input min="-1" max="39" name="i2c1_sda_gpio" type="number" class="form-control" id="i2c1_sda_gpio" /></div>
                    <div class="mb-3"><label for="i2c1_sck_gpio" class="form-label">SCK GPIO:</label><input min="-1" max="39" name="i2c1_sck_gpio" type="number" class="form-control" id="i2c1_sck_gpio" /></div>
                    <div class="mb-3">
                        <label for="i2c1_freq" class="form-label">Frequency:</label><input min="1000" max="800000" name="i2c1_freq" type="number" class="form-control" id="i2c1_freq" value="100000" />
                        <small class="small text-light">Hz</small>
                    </div>
                    <button type="button" class="btn btn-primary">Apply</button>
                </div>
                <div class="mb-4 border border-primary rounded p-3">
                    <h5>Counter_0 Modify</h5>
                    <div class="form-check form-switch mb-3"><input class="form-check-input" type="checkbox" id="counter0_enable" /><label class="form-check-label" for="counter0_enable">Enable</label></div>
                    <div class="mb-3"><label for="counter0_gpio" class="form-label">INPUT GPIO:</label><input min="-1" max="39" name="counter0_gpio" type="number" value="-1" class="form-control" id="counter0_gpio" /></div>
                    <div class="mb-3">
                        <label class="form-label">Active:</label>
                        <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="counter0_active" id="counter0Low" value="LOW" /><label class="form-check-label" for="counter0Low">LOW</label></div>
                        <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="counter0_active" id="counter0High" value="HIGH" /><label class="form-check-label" for="counter0High">HIGH</label></div>
                    </div>
                    <button type="button" class="btn btn-primary">Apply</button>
                </div>
                <div class="mb-4 border border-primary rounded p-3">
                    <h5>Counter_1 Modify</h5>
                    <div class="form-check form-switch mb-3"><input class="form-check-input" type="checkbox" id="counter1_enable" /><label class="form-check-label" for="counter1_enable">Enable</label></div>
                    <div class="mb-3"><label for="counter1_gpio" class="form-label">INPUT GPIO:</label><input min="-1" max="39" name="counter1_gpio" type="number" value="-1" class="form-control" id="counter1_gpio" /></div>
                    <div class="mb-3">
                        <label class="form-label">Active:</label>
                        <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="counter1_active" id="counter1Low" value="LOW" /><label class="form-check-label" for="counter1Low">LOW</label></div>
                        <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="counter1_active" id="counter1High" value="HIGH" /><label class="form-check-label" for="counter1High">HIGH</label></div>
                    </div>
                    <button type="button" class="btn btn-primary">Apply</button>
                </div>
                <div class="mb-4 border border-primary rounded p-3">
                    <h5>GNSS Modify</h5>
                    <div class="form-check form-switch mb-3"><input class="form-check-input" type="checkbox" id="gnss_enable" /><label class="form-check-label" for="gnss_enable">Enable</label></div>
                    <div class="mb-3">
                        <label for="gnss_channel" class="form-label">PORT:</label>
                        <select name="gnss_channel" id="gnss_channel" class="form-select">
                            <option value="0">NONE</option>
                            <option value="1">UART0</option>
                            <option value="2">UART1</option>
                            <option value="3">UART2</option>
                            <option value="4">TCP</option>
                        </select>
                    </div>
                    <div class="mb-3"><label for="gnssAtCommand" class="form-label">AT Command:</label><input maxlength="30" size="20" id="gnss_at_command" name="gnss_at_command" /></div>
                    <div class="mb-3"><label for="gnss_tcp_host" class="form-label">TCP Host:</label><input maxlength="20" size="15" id="gnss_tcp_host" name="gnss_tcp_host" value="%GNSS_TCP_HOST%" /></div>
                    <div class="mb-3"><label for="gnss_tcp_port" class="form-label">TCP Port:</label><input min="1024" max="65535" id="gnss_tcp_port" name="gnss_tcp_port" type="number" value="%GNSS_TCP_PORT%" /></div>
                    <button type="button" class="btn btn-primary">Apply</button>
                </div>
                <div class="mb-4 border border-primary rounded p-3">
                    <h5>MODBUS Modify</h5>
                    <div class="form-check form-switch mb-3"><input class="form-check-input" type="checkbox" id="modbus_enable" /><label class="form-check-label" for="modbus_enable">Enable</label></div>
                    <div class="mb-3">
                        <label for="modbus_channel" class="form-label">PORT:</label>
                        <select name="modbus_channel" id="modbus_channel" class="form-select">
                            <option value="0" selected="selected">NONE</option>
                            <option value="1">UART0</option>
                            <option value="2">UART1</option>
                            <option value="3">UART2</option>
                            <option value="4">TCP</option>
                        </select>
                    </div>
                    <div class="mb-3"><label for="modbus_address" class="form-label">Address:</label><input min="-1" max="39" name="modbus_address" type="number" value="0" /></div>
                    <div class="mb-3"><label for="modbus_de_gpio" class="form-label">DE:</label><input min="-1" max="39" name="modbus_de_gpio" type="number" value="-1" /></div>
                    <button type="button" class="btn btn-primary">Apply</button>
                </div>
                <div class="mb-4 border border-primary rounded p-3">
                    <h5>External TNC Modify</h5>
                    <div class="form-check form-switch mb-3"><input class="form-check-input" type="checkbox" id="tnc_enable" /><label class="form-check-label" for="tnc_enable">Enable</label></div>
                    <div class="mb-3">
                        <label for="tnc_channel" class="form-label">PORT:</label>
                        <select name="tnc_channel" id="tnc_channel" class="form-select">
                            <option value="0" selected="selected">NONE</option>
                            <option value="1">UART0</option>
                            <option value="2">UART1</option>
                            <option value="3">UART2</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="tnc_mode" class="form-label">MODE:</label>
                        <select name="tnc_mode" id="tnc_mode" class="form-select">
                            <option value="0">NONE</option>
                            <option value="1">KISS</option>
                            <option value="2" selected="selected">TNC2</option>
                            <option value="3">YAESU</option>
                        </select>
                    </div>
                    <button type="button" class="btn btn-primary">Apply</button>
                </div>
            </div>
        </div>
        <footer class="bg-primary text-center text-light py-3">ESP32IGate Modifications - &copy; 2025</footer>
        <script>
            function sendToServer(e) {
                fetch("/mod", { method: "POST", headers: { "Content-Type": "application/x-www-form-urlencoded" }, body: new URLSearchParams(e) })
                    .then((e) => e.text())
                    .then((e) => alert(e))
                    .catch((e) => console.error("Error:", e));
            }
            function submitUART0() {
                sendToServer({
                    uart0_enable: document.getElementById("uart0_enable").checked,
                    uart0_rx_gpio: document.getElementById("uart0_rx_gpio").value,
                    uart0_tx_gpio: document.getElementById("uart0_tx_gpio").value,
                    uart0_rts_gpio: document.getElementById("uart0_rts_gpio").value,
                    uart0_baudrate: document.getElementById("uart0_baudrate").value,
                });
            }
            function submitUART1() {
                sendToServer({
                    uart1_enable: document.getElementById("uart1_enable").checked,
                    uart1_rx_gpio: document.getElementById("uart1_rx_gpio").value,
                    uart1_tx_gpio: document.getElementById("uart1_tx_gpio").value,
                    uart1_rts_gpio: document.getElementById("uart1_rts_gpio").value,
                    uart1_baudrate: document.getElementById("uart1_baudrate").value,
                });
            }
            function submitUART2() {
                sendToServer({
                    uart2_enable: document.getElementById("uart2_enable").checked,
                    uart2_rx_gpio: document.getElementById("uart2_rx_gpio").value,
                    uart2_tx_gpio: document.getElementById("uart2_tx_gpio").value,
                    uart2_rts_gpio: document.getElementById("uart2_rts_gpio").value,
                    uart2_baudrate: document.getElementById("uart2_baudrate").value,
                });
            }
            function submitRF() {
                sendToServer({
                    rf_baudrate: document.getElementById("rf_baudrate").value,
                    rf_rx_gpio: document.getElementById("rf_rx_gpio").value,
                    rf_tx_gpio: document.getElementById("rf_tx_gpio").value,
                    rf_pd_gpio: document.getElementById("rf_pd_gpio").value,
                    rf_pwr_gpio: document.getElementById("rf_pwr_gpio").value,
                    rf_ptt_gpio: document.getElementById("rf_ptt_gpio").value,
                    rf_sql_gpio: document.getElementById("rf_sql_gpio").value,
                    rf_adc_atten: document.getElementById("rf_adc_atten").value,
                    rf_adc_dc_offset: document.getElementById("rf_adc_dc_offset").value,
                    rf_pd_active: document.querySelector('input[name="rf_pd_active"]:checked').value,
                    rf_pwr_active: document.querySelector('input[name="rf_pwr_active"]:checked').value,
                    rf_ptt_active: document.querySelector('input[name="rf_ptt_active"]:checked').value,
                    rf_sql_active: document.querySelector('input[name="rf_sql_active"]:checked').value,
                });
            }
            function submitGNSS() {
                sendToServer({
                    gnss_enable: document.getElementById("gnss_enable").checked,
                    gnss_channel: document.getElementById("gnss_channel").value,
                    gnss_at_command: document.getElementById("gnss_at_command").value,
                    gnss_tcp_host: document.getElementById("gnss_tcp_host").value,
                    gnss_tcp_port: document.getElementById("gnss_tcp_port").value,
                });
            }
            function submitMODBUS() {
                sendToServer({
                    modbus_enable: document.getElementById("modbus_enable").checked,
                    modbus_channel: document.getElementById("modbus_channel").value,
                    modbus_address: document.getElementById("modbus_address").value,
                    modbus_de_gpio: document.getElementById("modbus_de_gpio").value,
                });
            }
            function submitTNC() {
                sendToServer({ tnc_enable: document.getElementById("tnc_enable").checked, tnc_channel: document.getElementById("tnc_channel").value, tnc_mode: document.getElementById("tnc_mode").value });
            }
            function submitI2C0() {
                sendToServer({
                    i2c0_enable: document.getElementById("i2c0_enable").checked,
                    i2c0_sda_gpio: document.getElementById("i2c0_sda_gpio").value,
                    i2c0_sck_gpio: document.getElementById("i2c0_sck_gpio").value,
                    i2c0_freq: document.getElementById("i2c0_freq").value,
                });
            }
            function submitI2C1() {
                sendToServer({
                    i2c1_enable: document.getElementById("i2c1_enable").checked,
                    i2c1_sda_gpio: document.getElementById("i2c1_sda_gpio").value,
                    i2c1_sck_gpio: document.getElementById("i2c1_sck_gpio").value,
                    i2c1_freq: document.getElementById("i2c1_freq").value,
                });
            }
            function submitCounter0() {
                sendToServer({
                    counter0_enable: document.getElementById("counter0_enable").checked,
                    counter0_gpio: document.getElementById("counter0_gpio").value,
                    counter0_active: document.querySelector('input[name="counter0_active"]:checked').value,
                });
            }
            function submitCounter1() {
                sendToServer({
                    counter1_enable: document.getElementById("counter1_enable").checked,
                    counter1_gpio: document.getElementById("counter1_gpio").value,
                    counter1_active: document.querySelector('input[name="counter1_active"]:checked').value,
                });
            }
        </script>
 <script src="/bootstrap.bundle.min.js"></script>        
    </body>
</html>
